<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The environment-common crate contains three families of types:"><title>soroban_env_common - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-42caa33d.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="soroban_env_common" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (90ab8eaed 2024-11-14)" data-channel="nightly" data-search-js="search-6851d9ab.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../soroban_env_common/index.html">soroban_<wbr>env_<wbr>common</a><span class="version">22.1.3</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>soroban_env_common</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/soroban_env_common/lib.rs.html#1-128">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The environment-common crate contains three families of types:</p>
<ul>
<li>The <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> type, a 64-bit value type that is a union between several
different types (numbers, booleans, symbols, object references), encoded
via careful bit-packing.</li>
<li>Wrapper types (<a href="struct.Object.html" title="struct soroban_env_common::Object">Object</a>, <a href="struct.Symbol.html" title="struct soroban_env_common::Symbol">Symbol</a>, <a href="struct.Error.html" title="struct soroban_env_common::Error">Error</a>) that contain <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> in a
specific, known union state. These are also 64-bit values, but offer
methods specific to the union state (eg. <a href="struct.Symbol.html" title="struct soroban_env_common::Symbol">Symbol</a> will interconvert with
Rust string types).</li>
<li>The <a href="trait.Env.html" title="trait soroban_env_common::Env">Env</a> trait, which describes the <em>interface</em> between guest and host
code. In other words, <code>Env</code> describes a set of <em>host functions</em> that
must be implemented in a contract host, and can be called from a guest
(or by the SDK). Methods on the <a href="trait.Env.html" title="trait soroban_env_common::Env">Env</a> trait can only pass 64-bit values,
which are usually <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> or one of the wrapper types.</li>
</ul>
<p>The crate additionally contains functions for interconversion between the
<a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> type and XDR types, and re-exports the XDR definitions from
<a href="../stellar_xdr/index.html" title="mod stellar_xdr">stellar_xdr</a> under the module <a href="xdr/index.html" title="mod soroban_env_common::xdr">xdr</a>.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DurationObject"><code>pub use num::<a class="struct" href="num/struct.DurationObject.html" title="struct soroban_env_common::num::DurationObject">DurationObject</a>;</code></div></li><li><div class="item-name" id="reexport.I128Object"><code>pub use num::<a class="struct" href="num/struct.I128Object.html" title="struct soroban_env_common::num::I128Object">I128Object</a>;</code></div></li><li><div class="item-name" id="reexport.I256Object"><code>pub use num::<a class="struct" href="num/struct.I256Object.html" title="struct soroban_env_common::num::I256Object">I256Object</a>;</code></div></li><li><div class="item-name" id="reexport.I64Object"><code>pub use num::<a class="struct" href="num/struct.I64Object.html" title="struct soroban_env_common::num::I64Object">I64Object</a>;</code></div></li><li><div class="item-name" id="reexport.TimepointObject"><code>pub use num::<a class="struct" href="num/struct.TimepointObject.html" title="struct soroban_env_common::num::TimepointObject">TimepointObject</a>;</code></div></li><li><div class="item-name" id="reexport.U128Object"><code>pub use num::<a class="struct" href="num/struct.U128Object.html" title="struct soroban_env_common::num::U128Object">U128Object</a>;</code></div></li><li><div class="item-name" id="reexport.U256Object"><code>pub use num::<a class="struct" href="num/struct.U256Object.html" title="struct soroban_env_common::num::U256Object">U256Object</a>;</code></div></li><li><div class="item-name" id="reexport.U64Object"><code>pub use num::<a class="struct" href="num/struct.U64Object.html" title="struct soroban_env_common::num::U64Object">U64Object</a>;</code></div></li><li><div class="item-name" id="reexport.DurationSmall"><code>pub use num::<a class="struct" href="num/struct.DurationSmall.html" title="struct soroban_env_common::num::DurationSmall">DurationSmall</a>;</code></div></li><li><div class="item-name" id="reexport.I128Small"><code>pub use num::<a class="struct" href="num/struct.I128Small.html" title="struct soroban_env_common::num::I128Small">I128Small</a>;</code></div></li><li><div class="item-name" id="reexport.I256Small"><code>pub use num::<a class="struct" href="num/struct.I256Small.html" title="struct soroban_env_common::num::I256Small">I256Small</a>;</code></div></li><li><div class="item-name" id="reexport.I64Small"><code>pub use num::<a class="struct" href="num/struct.I64Small.html" title="struct soroban_env_common::num::I64Small">I64Small</a>;</code></div></li><li><div class="item-name" id="reexport.TimepointSmall"><code>pub use num::<a class="struct" href="num/struct.TimepointSmall.html" title="struct soroban_env_common::num::TimepointSmall">TimepointSmall</a>;</code></div></li><li><div class="item-name" id="reexport.U128Small"><code>pub use num::<a class="struct" href="num/struct.U128Small.html" title="struct soroban_env_common::num::U128Small">U128Small</a>;</code></div></li><li><div class="item-name" id="reexport.U256Small"><code>pub use num::<a class="struct" href="num/struct.U256Small.html" title="struct soroban_env_common::num::U256Small">U256Small</a>;</code></div></li><li><div class="item-name" id="reexport.U64Small"><code>pub use num::<a class="struct" href="num/struct.U64Small.html" title="struct soroban_env_common::num::U64Small">U64Small</a>;</code></div></li><li><div class="item-name" id="reexport.DurationVal"><code>pub use num::<a class="struct" href="num/struct.DurationVal.html" title="struct soroban_env_common::num::DurationVal">DurationVal</a>;</code></div></li><li><div class="item-name" id="reexport.I128Val"><code>pub use num::<a class="struct" href="num/struct.I128Val.html" title="struct soroban_env_common::num::I128Val">I128Val</a>;</code></div></li><li><div class="item-name" id="reexport.I256Val"><code>pub use num::<a class="struct" href="num/struct.I256Val.html" title="struct soroban_env_common::num::I256Val">I256Val</a>;</code></div></li><li><div class="item-name" id="reexport.I32Val"><code>pub use num::<a class="struct" href="num/struct.I32Val.html" title="struct soroban_env_common::num::I32Val">I32Val</a>;</code></div></li><li><div class="item-name" id="reexport.I64Val"><code>pub use num::<a class="struct" href="num/struct.I64Val.html" title="struct soroban_env_common::num::I64Val">I64Val</a>;</code></div></li><li><div class="item-name" id="reexport.TimepointVal"><code>pub use num::<a class="struct" href="num/struct.TimepointVal.html" title="struct soroban_env_common::num::TimepointVal">TimepointVal</a>;</code></div></li><li><div class="item-name" id="reexport.U128Val"><code>pub use num::<a class="struct" href="num/struct.U128Val.html" title="struct soroban_env_common::num::U128Val">U128Val</a>;</code></div></li><li><div class="item-name" id="reexport.U256Val"><code>pub use num::<a class="struct" href="num/struct.U256Val.html" title="struct soroban_env_common::num::U256Val">U256Val</a>;</code></div></li><li><div class="item-name" id="reexport.U32Val"><code>pub use num::<a class="struct" href="num/struct.U32Val.html" title="struct soroban_env_common::num::U32Val">U32Val</a>;</code></div></li><li><div class="item-name" id="reexport.U64Val"><code>pub use num::<a class="struct" href="num/struct.U64Val.html" title="struct soroban_env_common::num::U64Val">U64Val</a>;</code></div></li><li><div class="item-name" id="reexport.call_macro_with_all_host_functions"><code>pub use env::call_macro_with_all_host_functions;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="meta/index.html" title="mod soroban_env_common::meta">meta</a></div><div class="desc docblock-short">This module contains version constants (and other metadata) that are
embedded in binaries (especially WASM binaries) compiled against a
particular version of this crate. Versioning at this level provides an early
diagnostic check for compatibility between a loaded WASM binary and the
<a href="trait.Env.html" title="trait soroban_env_common::Env">Env</a> interface provided by the host, rather than a cryptic failure
due to a runtime host function signature mismatch.</div></li><li><div class="item-name"><a class="mod" href="num/index.html" title="mod soroban_env_common::num">num</a></div></li><li><div class="item-name"><a class="mod" href="xdr/index.html" title="mod soroban_env_common::xdr">xdr</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AddressObject.html" title="struct soroban_env_common::AddressObject">Address<wbr>Object</a></div></li><li><div class="item-name"><a class="struct" href="struct.Bool.html" title="struct soroban_env_common::Bool">Bool</a></div></li><li><div class="item-name"><a class="struct" href="struct.BytesObject.html" title="struct soroban_env_common::BytesObject">Bytes<wbr>Object</a></div></li><li><div class="item-name"><a class="struct" href="struct.ConversionError.html" title="struct soroban_env_common::ConversionError">Conversion<wbr>Error</a></div><div class="desc docblock-short">Error type indicating a failure to convert some type to another; details of
the failed conversion may be written to the debug log, when possible.</div></li><li><div class="item-name"><a class="struct" href="struct.Error.html" title="struct soroban_env_common::Error">Error</a></div><div class="desc docblock-short">Wrapper for a <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> that is tagged with [Tag::Error], interpreting the
<a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a>’s body as a pair of a 28-bit error-type code and a 32-bit error
code. The error-type codes correspond to the enumerated cases of
<a href="xdr/enum.ScErrorType.html" title="enum soroban_env_common::xdr::ScErrorType">ScErrorType</a>, and the error codes correspond to the code values stored in
each variant of the <a href="xdr/enum.ScError.html" title="enum soroban_env_common::xdr::ScError">ScError</a> union.</div></li><li><div class="item-name"><a class="struct" href="struct.I256.html" title="struct soroban_env_common::I256">I256</a></div><div class="desc docblock-short">A 256-bit signed integer type.</div></li><li><div class="item-name"><a class="struct" href="struct.MapObject.html" title="struct soroban_env_common::MapObject">MapObject</a></div></li><li><div class="item-name"><a class="struct" href="struct.Object.html" title="struct soroban_env_common::Object">Object</a></div><div class="desc docblock-short">Wrapper for a <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> that is tagged with one of the object types,
interpreting the <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a>’s body as containing a 32-bit handle to a host
object.</div></li><li><div class="item-name"><a class="struct" href="struct.ScValObjRef.html" title="struct soroban_env_common::ScValObjRef">ScVal<wbr>ObjRef</a></div></li><li><div class="item-name"><a class="struct" href="struct.ScValObject.html" title="struct soroban_env_common::ScValObject">ScVal<wbr>Object</a></div><div class="desc docblock-short"><code>ScValObject</code> (and its reference-based type <code>ScValObjRef</code>) is a small
wrapper type that does <em>not</em> have its own XDR definition, it just denotes
(as a type) the subset of <code>ScVal</code> values that need to be represented in
<code>Val</code> by one of the cases that can be an <code>Object</code>. In other words
<code>Val::try_from_val(&amp;v, e).is_object()</code> will be true iff
<code>ScValObject::classify(v)</code> is <code>Ok(ScValObject(v))</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.StringObject.html" title="struct soroban_env_common::StringObject">String<wbr>Object</a></div></li><li><div class="item-name"><a class="struct" href="struct.Symbol.html" title="struct soroban_env_common::Symbol">Symbol</a></div></li><li><div class="item-name"><a class="struct" href="struct.SymbolObject.html" title="struct soroban_env_common::SymbolObject">Symbol<wbr>Object</a></div></li><li><div class="item-name"><a class="struct" href="struct.SymbolSmall.html" title="struct soroban_env_common::SymbolSmall">Symbol<wbr>Small</a></div></li><li><div class="item-name"><a class="struct" href="struct.SymbolSmallIter.html" title="struct soroban_env_common::SymbolSmallIter">Symbol<wbr>Small<wbr>Iter</a></div><div class="desc docblock-short">An iterator that decodes the individual bit-packed characters from a
symbol and yields them as regular Rust <a href="https://doc.rust-lang.org/nightly/std/primitive.char.html" title="primitive char">char</a> values.</div></li><li><div class="item-name"><a class="struct" href="struct.SymbolStr.html" title="struct soroban_env_common::SymbolStr">Symbol<wbr>Str</a></div><div class="desc docblock-short">An expanded form of a <a href="struct.Symbol.html" title="struct soroban_env_common::Symbol">Symbol</a> that stores its characters as ASCII-range
bytes in a <a href="https://doc.rust-lang.org/nightly/std/primitive.u8.html" title="primitive u8">u8</a> array – up to the maximum size of a large symbol object –
rather than as packed 6-bit codes within a <a href="https://doc.rust-lang.org/nightly/std/primitive.u64.html" title="primitive u64">u64</a>. Useful for interoperation
with standard Rust string types.</div></li><li><div class="item-name"><a class="struct" href="struct.U256.html" title="struct soroban_env_common::U256">U256</a></div><div class="desc docblock-short">A 256-bit unsigned integer type.</div></li><li><div class="item-name"><a class="struct" href="struct.Val.html" title="struct soroban_env_common::Val">Val</a></div></li><li><div class="item-name"><a class="struct" href="struct.VecObject.html" title="struct soroban_env_common::VecObject">VecObject</a></div></li><li><div class="item-name"><a class="struct" href="struct.Version.html" title="struct soroban_env_common::Version">Version</a></div></li><li><div class="item-name"><a class="struct" href="struct.VmCaller.html" title="struct soroban_env_common::VmCaller">VmCaller</a></div><div class="desc docblock-short">The VmCallerEnv trait is similar to the Env trait – it
provides all the same-named methods – but they have a form that takes an
initial <a href="struct.VmCaller.html" title="struct soroban_env_common::VmCaller"><code>VmCaller</code></a> argument by <code>&amp;mut</code> that may or may-not wrap a
<code>wasmi::Caller</code> structure, depending on whether it was invoked from a wasmi
host-function wrapper.</div></li><li><div class="item-name"><a class="struct" href="struct.Void.html" title="struct soroban_env_common::Void">Void</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.StorageType.html" title="enum soroban_env_common::StorageType">Storage<wbr>Type</a></div><div class="desc docblock-short">This is just a distinct enum local to the env interface that is used as
an argument to storage functions. It doesn’t correspond to any [<code>Val</code>] types,
and is passed by direct marshalling as a u64.</div></li><li><div class="item-name"><a class="enum" href="enum.SymbolError.html" title="enum soroban_env_common::SymbolError">Symbol<wbr>Error</a></div><div class="desc docblock-short">Errors related to operations on the <a href="struct.SymbolObject.html" title="struct soroban_env_common::SymbolObject">SymbolObject</a> and <a href="struct.SymbolSmall.html" title="struct soroban_env_common::SymbolSmall">SymbolSmall</a> types.</div></li><li><div class="item-name"><a class="enum" href="enum.Tag.html" title="enum soroban_env_common::Tag">Tag</a></div><div class="desc docblock-short">Code values for the 8 <code>tag</code> bits in the bit-packed representation
of <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a>. These don’t coincide with tag numbers in the SCVal XDR
but cover all those cases as well as some optimized refinements for
special cases (boolean true and false, small-value forms).</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.VERSION.html" title="constant soroban_env_common::VERSION">VERSION</a></div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.CheckedEnvArg.html" title="trait soroban_env_common::CheckedEnvArg">Checked<wbr>EnvArg</a></div><div class="desc docblock-short">This trait is used by macro-generated dispatch and forwarding functions to
check arguments being passed to the Env. The default implementations call
through to the Env integrity-checking functions.</div></li><li><div class="item-name"><a class="trait" href="trait.Compare.html" title="trait soroban_env_common::Compare">Compare</a></div><div class="desc docblock-short">General trait representing the ability to compare two values of some type.
Similar to <code>core::cmp::Cmp</code> but with two key differences: the comparison is
fallible, and is provided by some external type implementing <code>Compare</code>
rather than the compared type itself.</div></li><li><div class="item-name"><a class="trait" href="trait.Convert.html" title="trait soroban_env_common::Convert">Convert</a></div><div class="desc docblock-short">General trait representing a the ability of some object to perform a
(possibly unsuccessful) conversion between two other types.</div></li><li><div class="item-name"><a class="trait" href="trait.Env.html" title="trait soroban_env_common::Env">Env</a></div><div class="desc docblock-short">This trait represents the interface between Host and Guest, used by
client contract code and implemented (via <a href="trait.Env.html" title="trait soroban_env_common::Env">Env</a>) by the host.
It consists of functions that take or return only 64-bit values such
as <a href="struct.Val.html" title="struct soroban_env_common::Val">Val</a> or <a href="https://doc.rust-lang.org/nightly/std/primitive.u64.html" title="primitive u64">u64</a>.</div></li><li><div class="item-name"><a class="trait" href="trait.EnvBase.html" title="trait soroban_env_common::EnvBase">EnvBase</a></div><div class="desc docblock-short">Base trait extended by the <a href="trait.Env.html" title="trait soroban_env_common::Env">Env</a> trait, providing various special-case
functions that do <em>not</em> simply call across cross the guest/host interface.</div></li><li><div class="item-name"><a class="trait" href="trait.TryFromVal.html" title="trait soroban_env_common::TryFromVal">TryFrom<wbr>Val</a></div><div class="desc docblock-short">Trait for types that can be fallibly converted to another type <code>V</code>, analogous
to the standard Rust type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom"><code>TryFrom</code></a>, but making use of the provided <code>Env</code>
implementation <code>E</code> in order to convert parts of the type that require it.
Mainly this exists because <code>Val</code> types that contain object handles need to
delegate to the environment to look up and extract the content of those
handles.</div></li><li><div class="item-name"><a class="trait" href="trait.TryIntoVal.html" title="trait soroban_env_common::TryIntoVal">TryInto<wbr>Val</a></div><div class="desc docblock-short">The opposite trait to <a href="trait.TryFromVal.html" title="trait soroban_env_common::TryFromVal"><code>TryFromVal</code></a>, analogous to the way that <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto"><code>TryInto</code></a>
exists as an opposite to <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom"><code>TryFrom</code></a>. Exists only for convenience of doing
conversions via <code>.try_into_val(e)</code> or specifying convertability with a bound
like <code>TryIntoVal&lt;E,Other&gt;</code>.</div></li><li><div class="item-name"><a class="trait" href="trait.VmCallerEnv.html" title="trait soroban_env_common::VmCallerEnv">VmCaller<wbr>Env</a></div><div class="desc docblock-short">This trait is a variant of the <a href="trait.Env.html" title="trait soroban_env_common::Env">Env</a> trait used to
define the interface implemented by Host. The wasmi VM dispatch
functions (in soroban_env_host::dispatch) call methods on
<code>VmCallerEnv</code>, passing a <a href="struct.VmCaller.html" title="struct soroban_env_common::VmCaller"><code>VmCaller</code></a> that wraps the wasmi Caller
context, and then convert any <code>Result::Err(...)</code> return value into a
VM trap, halting VM execution.</div></li><li><div class="item-name"><a class="trait" href="trait.WasmiMarshal.html" title="trait soroban_env_common::WasmiMarshal">Wasmi<wbr>Marshal</a></div></li></ul></section></div></main></body></html>