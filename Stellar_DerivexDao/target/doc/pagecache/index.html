<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`pagecache` is a lock-free pagecache and log for building high-performance databases."><title>pagecache - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-42caa33d.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pagecache" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (90ab8eaed 2024-11-14)" data-channel="nightly" data-search-js="search-6851d9ab.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../pagecache/index.html">pagecache</a><span class="version">0.19.4</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#statics" title="Statics">Statics</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>pagecache</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/pagecache/lib.rs.html#1-306">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>pagecache</code> is a lock-free pagecache and log for building high-performance
databases.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.Log"><code>pub use self::logger::<a class="struct" href="logger/struct.Log.html" title="struct pagecache::logger::Log">Log</a>;</code></div></li><li><div class="item-name" id="reexport.LogRead"><code>pub use self::logger::LogRead;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="debug/index.html" title="mod pagecache::debug">debug</a></div><div class="desc docblock-short">Debug helps test concurrent issues with random jitter and other
instruments.</div></li><li><div class="item-name"><a class="mod" href="logger/index.html" title="mod pagecache::logger">logger</a></div><div class="desc docblock-short">Working with <code>Log</code></div></li><li><div class="item-name"><a class="mod" href="threadpool/index.html" title="mod pagecache::threadpool">threadpool</a></div><div class="desc docblock-short">A simple adaptive threadpool that returns a oneshot future.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Atomic.html" title="struct pagecache::Atomic">Atomic</a></div><div class="desc docblock-short">An atomic pointer that can be safely shared between threads.</div></li><li><div class="item-name"><a class="struct" href="struct.Backoff.html" title="struct pagecache::Backoff">Backoff</a></div><div class="desc docblock-short">Performs exponential backoff in spin loops.</div></li><li><div class="item-name"><a class="struct" href="struct.CachePadded.html" title="struct pagecache::CachePadded">Cache<wbr>Padded</a></div><div class="desc docblock-short">Pads and aligns a value to the length of a cache line.</div></li><li><div class="item-name"><a class="struct" href="struct.Collector.html" title="struct pagecache::Collector">Collector</a></div><div class="desc docblock-short">An epoch-based garbage collector.</div></li><li><div class="item-name"><a class="struct" href="struct.CompareAndSetError.html" title="struct pagecache::CompareAndSetError">Compare<wbr>AndSet<wbr>Error</a></div><div class="desc docblock-short">The error returned on failed compare-and-set operation.</div></li><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct pagecache::Config">Config</a></div><div class="desc docblock-short">A finalized <code>ConfigBuilder</code> that can be use multiple times
to open a <code>Tree</code> or <code>Log</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.ConfigBuilder.html" title="struct pagecache::ConfigBuilder">Config<wbr>Builder</a></div><div class="desc docblock-short">Top-level configuration for the system.</div></li><li><div class="item-name"><a class="struct" href="struct.Guard.html" title="struct pagecache::Guard">Guard</a></div><div class="desc docblock-short">A guard that keeps the current thread pinned.</div></li><li><div class="item-name"><a class="struct" href="struct.Histogram.html" title="struct pagecache::Histogram">Histogram</a></div><div class="desc docblock-short">A histogram collector that uses zero-configuration logarithmic buckets.</div></li><li><div class="item-name"><a class="struct" href="struct.Lazy.html" title="struct pagecache::Lazy">Lazy</a></div><div class="desc docblock-short">A lazily initialized value</div></li><li><div class="item-name"><a class="struct" href="struct.LocalHandle.html" title="struct pagecache::LocalHandle">Local<wbr>Handle</a></div><div class="desc docblock-short">A handle to a garbage collector.</div></li><li><div class="item-name"><a class="struct" href="struct.Lru.html" title="struct pagecache::Lru">Lru</a></div><div class="desc docblock-short">A simple LRU cache.</div></li><li><div class="item-name"><a class="struct" href="struct.Meta.html" title="struct pagecache::Meta">Meta</a></div><div class="desc docblock-short">A simple map that can be used to store metadata
for the pagecache tenant.</div></li><li><div class="item-name"><a class="struct" href="struct.Node.html" title="struct pagecache::Node">Node</a></div><div class="desc docblock-short">A node in the lock-free <code>Stack</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.OneShot.html" title="struct pagecache::OneShot">OneShot</a></div><div class="desc docblock-short">A Future value which may or may not be filled</div></li><li><div class="item-name"><a class="struct" href="struct.OneShotFiller.html" title="struct pagecache::OneShotFiller">OneShot<wbr>Filler</a></div><div class="desc docblock-short">The completer side of the Future</div></li><li><div class="item-name"><a class="struct" href="struct.Owned.html" title="struct pagecache::Owned">Owned</a></div><div class="desc docblock-short">An owned heap-allocated object.</div></li><li><div class="item-name"><a class="struct" href="struct.PageCache.html" title="struct pagecache::PageCache">Page<wbr>Cache</a></div><div class="desc docblock-short">A lock-free pagecache which supports fragmented pages
for dramatically improving write throughput.</div></li><li><div class="item-name"><a class="struct" href="struct.PagePtr.html" title="struct pagecache::PagePtr">PagePtr</a></div><div class="desc docblock-short">A pointer to shared lock-free state bound by a pinned epoch’s lifetime.</div></li><li><div class="item-name"><a class="struct" href="struct.PageTable.html" title="struct pagecache::PageTable">Page<wbr>Table</a></div><div class="desc docblock-short">A simple lock-free radix tree.</div></li><li><div class="item-name"><a class="struct" href="struct.RecoveryGuard.html" title="struct pagecache::RecoveryGuard">Recovery<wbr>Guard</a></div><div class="desc docblock-short">Ensures that any operations that are written to disk between the
creation of this guard and its destruction will be recovered
atomically. When this guard is dropped, it marks in an earlier
reservation where the stable tip must be in order to perform
recovery. If this is beyond where the system successfully
wrote before crashing, then the recovery will stop immediately
before any of the atomic batch can be partially recovered.</div></li><li><div class="item-name"><a class="struct" href="struct.Reservation.html" title="struct pagecache::Reservation">Reservation</a></div><div class="desc docblock-short">A pending log reservation which can be aborted or completed.
NB the holder should quickly call <code>complete</code> or <code>abort</code> as
taking too long to decide will cause the underlying IO
buffer to become blocked.</div></li><li><div class="item-name"><a class="struct" href="struct.Shared.html" title="struct pagecache::Shared">Shared</a></div><div class="desc docblock-short">A pointer to an object protected by the epoch GC.</div></li><li><div class="item-name"><a class="struct" href="struct.Stack.html" title="struct pagecache::Stack">Stack</a></div><div class="desc docblock-short">A simple lock-free stack, with the ability to atomically
append or entirely swap-out entries.</div></li><li><div class="item-name"><a class="struct" href="struct.StackIter.html" title="struct pagecache::StackIter">Stack<wbr>Iter</a></div><div class="desc docblock-short">An iterator over nodes in a lock-free stack.</div></li><li><div class="item-name"><a class="struct" href="struct.VecSet.html" title="struct pagecache::VecSet">VecSet</a></div><div class="desc docblock-short">A set built on top of <code>Vec</code> and binary search,
for use when calling <code>nth</code> to iterate over a set
is too expensive, and the set size is expected to be
~10 or less most of the time.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DiskPtr.html" title="enum pagecache::DiskPtr">DiskPtr</a></div><div class="desc docblock-short">A pointer to a location on disk or an off-log blob.</div></li><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum pagecache::Error">Error</a></div><div class="desc docblock-short">An Error type encapsulating various issues that may come up
in both the expected and unexpected operation of a <code>PageCache</code>.</div></li><li><div class="item-name"><a class="enum" href="enum.LogKind.html" title="enum pagecache::LogKind">LogKind</a></div><div class="desc docblock-short">The high-level types of stored information
about pages and their mutations</div></li><li><div class="item-name"><a class="enum" href="enum.SegmentMode.html" title="enum pagecache::SegmentMode">Segment<wbr>Mode</a></div><div class="desc docblock-short">The log may be configured to write data
in several different ways, depending on
the constraints of the system using it.</div></li></ul><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="static" href="static.M.html" title="static pagecache::M">M</a></div><div class="desc docblock-short">A metric collector for all pagecache users running in this
process.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Materializer.html" title="trait pagecache::Materializer">Materializer</a></div><div class="desc docblock-short">A user of a <code>PageCache</code> needs to provide a <code>Materializer</code> which
handles the merging of page fragments.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.node_from_frag_vec.html" title="fn pagecache::node_from_frag_vec">node_<wbr>from_<wbr>frag_<wbr>vec</a></div><div class="desc docblock-short">Turns a vector of elements into a lock-free stack
of them, and returns the head of the stack.</div></li><li><div class="item-name"><a class="fn" href="fn.pin.html" title="fn pagecache::pin">pin</a></div><div class="desc docblock-short">Pins the current thread.</div></li><li><div class="item-name"><a class="fn" href="fn.unprotected.html" title="fn pagecache::unprotected">unprotected</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">Returns a reference to a dummy guard that allows unprotected access to <a href="struct.Atomic.html"><code>Atomic</code></a>s.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.BlobPointer.html" title="type pagecache::BlobPointer">Blob<wbr>Pointer</a></div><div class="desc docblock-short">A pointer to an blob blob.</div></li><li><div class="item-name"><a class="type" href="type.CasResult.html" title="type pagecache::CasResult">CasResult</a></div><div class="desc docblock-short">A compare and swap result.  If the CAS is successful,
the new <code>PagePtr</code> will be returned as <code>Ok</code>.  Otherwise,
the <code>Err</code> will contain a tuple of the current <code>PagePtr</code>
and the old value that could not be set atomically.</div></li><li><div class="item-name"><a class="type" href="type.FastMap1.html" title="type pagecache::FastMap1">Fast<wbr>Map1</a></div><div class="desc docblock-short">A fast map that is not resistant to collision attacks. Works
on one byte at a time.</div></li><li><div class="item-name"><a class="type" href="type.FastMap4.html" title="type pagecache::FastMap4">Fast<wbr>Map4</a></div><div class="desc docblock-short">A fast map that is not resistant to collision attacks. Works
on 4 bytes at a time.</div></li><li><div class="item-name"><a class="type" href="type.FastMap8.html" title="type pagecache::FastMap8">Fast<wbr>Map8</a></div><div class="desc docblock-short">A fast map that is not resistant to collision attacks. Works
on 8 bytes at a time.</div></li><li><div class="item-name"><a class="type" href="type.FastSet1.html" title="type pagecache::FastSet1">Fast<wbr>Set1</a></div><div class="desc docblock-short">A fast set that is not resistant to collision attacks. Works
on one byte at a time.</div></li><li><div class="item-name"><a class="type" href="type.FastSet4.html" title="type pagecache::FastSet4">Fast<wbr>Set4</a></div><div class="desc docblock-short">A fast set that is not resistant to collision attacks. Works
on 4 bytes at a time.</div></li><li><div class="item-name"><a class="type" href="type.FastSet8.html" title="type pagecache::FastSet8">Fast<wbr>Set8</a></div><div class="desc docblock-short">A fast set that is not resistant to collision attacks. Works
on 8 bytes at a time.</div></li><li><div class="item-name"><a class="type" href="type.LogId.html" title="type pagecache::LogId">LogId</a></div><div class="desc docblock-short">A log file offset.</div></li><li><div class="item-name"><a class="type" href="type.Lsn.html" title="type pagecache::Lsn">Lsn</a></div><div class="desc docblock-short">A logical sequence number.</div></li><li><div class="item-name"><a class="type" href="type.PageId.html" title="type pagecache::PageId">PageId</a></div><div class="desc docblock-short">A page identifier.</div></li><li><div class="item-name"><a class="type" href="type.Result.html" title="type pagecache::Result">Result</a></div><div class="desc docblock-short">The top-level result type for dealing with
the <code>PageCache</code>.</div></li><li><div class="item-name"><a class="type" href="type.SegmentId.html" title="type pagecache::SegmentId">Segment<wbr>Id</a></div><div class="desc docblock-short">An offset for a storage file segment.</div></li></ul></section></div></main></body></html>